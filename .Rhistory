knitr::opts_chunk$set(echo = FALSE)
library(ggplot2)
ggplot(diamonds, aes(carat, price)) + geom_smooth() +
facet_grid(~ cut)
library(foreign)
library(dplyr)
library(foreign)
library(dplyr)
grupo <- read.dbf('tb_grupo.dbf')
subgrupo <- read.dbf('tb_subgrupo.dbf')
procedimento <- read.dcf('tb_proced.dbf')
grupo <- read.dbf('tb_grupo.dbf')
subgrupo <- read.dbf('tb_subgrupo.dbf')
procedimento <- read.dbf('tb_proced.dbf')
forma_organizacao <- read.dbf('tb_formaorg.dbf')
tup_tuss <- read.dbf('tup_tuss.dbf')
View(tup_tuss)
View(tup_tuss)
View(subgrupo)
View(procedimento)
View(grupo)
View(forma_organizacao)
View(forma_organizacao)
knitr::opts_chunk$set(echo = FALSE)
library(dplyr)
library(dplyr)
setwd('TabelaUnificada_201809_v1809051203/')
setwd('TabelaUnificada_201809_v1809051203/')
install.packages("textreadr")
library(dplyr)
library(textreadr)
setwd('TabelaUnificada_201809_v1809051203/')
grupo <- read_document('tb_grupo.txt')
subgrupo <- read_document('tb_sub_grupo.txt')
forma_organizacao <- read_document('tb_forma_organizacao.txt')
procedimento <- read_document('tb_procedimento.txt')
str(grupo)
print(grupo)
print(iconv(grupo, "latin1", "UTF-8"))
setwd('TabelaUnificada_201809_v1809051203/')
grupo <- iconv(read_document('tb_grupo.txt'), "latin1", "UTF-8")
subgrupo <- iconv(read_document('tb_sub_grupo.txt'), "latin1", "UTF-8")
forma_organizacao <- iconv(read_document('tb_forma_organizacao.txt'), "latin1", "UTF-8")
procedimento <- iconv(read_document('tb_procedimento.txt'), "latin1", "UTF-8")
print(grupo)
print(forma_organizacao)
setwd('TabelaUnificada_201809_v1809051203/')
grupo <- iconv(read_document('tb_grupo.txt'), "latin1", "UTF-8")
subgrupo <- iconv(read_document('tb_sub_grupo.txt'), "latin1", "UTF-8")
forma_organizacao <- iconv(read_document('tb_forma_organizacao.txt'), "latin1", "UTF-8")
procedimento <- iconv(read_document('tb_procedimento.txt'), "latin1", "UTF-8")
setwd('TabelaUnificada_201809_v1809051203/')
grupo <- iconv(read_document('tb_grupo.txt'), "latin1", "UTF-8")
subgrupo <- iconv(read_document('tb_sub_grupo.txt'), "latin1", "UTF-8")
forma_organizacao <- iconv(read_document('tb_forma_organizacao.txt'), "latin1", "UTF-8")
procedimento <- iconv(read_document('tb_procedimento.txt'), "latin1", "UTF-8")
setwd('TabelaUnificada_201809_v1809051203/')
grupo <- read_document('tb_grupo.txt')
subgrupo <- read_document('tb_sub_grupo.txt')
forma_organizacao <- read_document('tb_forma_organizacao.txt')
procedimento <- read_document('tb_procedimento.txt')
setwd('TabelaUnificada_201809_v1809051203/')
grupo <- iconv(read_document('tb_grupo.txt'), "latin1", "UTF-8")
subgrupo <- iconv(read_document('tb_sub_grupo.txt'), "latin1", "UTF-8")
forma_organizacao <- iconv(read_document('tb_forma_organizacao.txt'), "latin1", "UTF-8")
procedimento <- iconv(read_document('tb_procedimento.txt'), "latin1", "UTF-8")
setwd('TabelaUnificada_201809_v1809051203/')
grupo <- iconv(read_document('tb_grupo.txt'), "latin1", "UTF-8")
subgrupo <- iconv(read_document('tb_sub_grupo.txt'), "latin1", "UTF-8")
forma_organizacao <- iconv(read_document('tb_forma_organizacao.txt'), "latin1", "UTF-8")
procedimento <- iconv(read_document('tb_procedimento.txt'), "latin1", "UTF-8")
library(dplyr)
library(textreadr)
setwd('TabelaUnificada_201809_v1809051203/')
grupo <- iconv(read_document('tb_grupo.txt'), "latin1", "UTF-8")
subgrupo <- iconv(read_document('tb_sub_grupo.txt'), "latin1", "UTF-8")
forma_organizacao <- iconv(read_document('tb_forma_organizacao.txt'), "latin1", "UTF-8")
procedimento <- iconv(read_document('tb_procedimento.txt'), "latin1", "UTF-8")
setwd('TabelaUnificada_201809_v1809051203/')
grupo <- iconv(read_document('tb_grupo.txt'), "latin1", "UTF-8")
subgrupo <- iconv(read_document('tb_sub_grupo.txt'), "latin1", "UTF-8")
forma_organizacao <- iconv(read_document('tb_forma_organizacao.txt'), "latin1", "UTF-8")
procedimento <- iconv(read_document('tb_procedimento.txt'), "latin1", "UTF-8")
print(grupo)
setwd('TabelaUnificada_201809_v1809051203/')
grupo.layout <- iconv(read_document('tb_grupo_layout.txt'), "latin1", "UTF-8")
head(grupo.layout)
setwd('TabelaUnificada_201809_v1809051203/')
grupo.layout <- iconv(read_document('tb_grupo_layout.txt'), "latin1", "UTF-8")
view(grupo.layout)
View(grupo.layout)
setwd('TabelaUnificada_201809_v1809051203/')
grupo.layout <- iconv(read.csv('tb_grupo_layout.txt'), "latin1", "UTF-8")
View(grupo.layout)
setwd('TabelaUnificada_201809_v1809051203/')
grupo.layout <- iconv(read.csv('tb_grupo_layout.txt', header = TRUE, sep = ','), "latin1", "UTF-8")
View(grupo.layout)
setwd('TabelaUnificada_201809_v1809051203/')
grupo.layout <- read.csv('tb_grupo_layout.txt', header = TRUE, sep = ',')
View(grupo.layout)
library(rmarkdown)
setwd('TabelaUnificada_201809_v1809051203/')
grupo.layout <- read.csv('tb_grupo_layout.txt', header = TRUE, sep = ',')
paged_table(grupo.layout)
library(rmarkdown)
setwd('TabelaUnificada_201809_v1809051203/')
grupo.layout <- read.csv('tb_grupo_layout.txt', header = TRUE, sep = ',')
paged_table(grupo.layout)
co_grupo <- substr(grupo, 1, 2)
no_grupo <- substr(grupo, 3, 102)
dt_competencia <- substr(grupo, 103, 108)
grupo.ds <- data.frame(co_grupo, no_grupo, dt_competencia)
View(grupo.ds)
library(rmarkdown)
setwd('TabelaUnificada_201809_v1809051203/')
subgrupo.layout <- read.csv('tb_sub_grupo_layout.txt', header = TRUE, sep = ',')
paged_table(subgrupo.layout)
co_grupo <- substr(grupo, 1, 2)
co_sub_grupo <- substr(grupo, 3, 4)
no_sub_grupo <- substr(grupo, 5, 104)
dt_competencia <- substr(grupo, 105, 110)
subgrupo.ds <- data.frame(co_grupo, co_sub_grupo, no_sub_grupo, dt_competencia)
View(subgrupo.ds)
co_grupo <- substr(subgrupo, 1, 2)
co_sub_grupo <- substr(subgrupo, 3, 4)
no_sub_grupo <- substr(subgrupo, 5, 104)
dt_competencia <- substr(subgrupo, 105, 110)
subgrupo.ds <- data.frame(co_grupo, co_sub_grupo, no_sub_grupo, dt_competencia)
library(rmarkdown)
setwd('TabelaUnificada_201809_v1809051203/')
forma_organizacao.layout <- read.csv('tb_forma_organizacao_layout.txt', header = TRUE, sep = ',')
paged_table(forma_organizacao.layout)
co_grupo <- substr(forma_organizacao, 1, 2)
co_sub_grupo <- substr(forma_organizacao, 3, 4)
co_forma_organizacao <- substr(forma_organizacao, 5, 6)
no_forma_organizacao <- substr(forma_organizacao, 7, 106)
dt_competencia <- substr(forma_organizacao, 107, 112)
forma_organizacao.ds <- data.frame(co_grupo, co_sub_grupo, no_sub_grupo, dt_competencia)
co_grupo <- substr(forma_organizacao, 1, 2)
co_sub_grupo <- substr(forma_organizacao, 3, 4)
co_forma_organizacao <- substr(forma_organizacao, 5, 6)
no_forma_organizacao <- substr(forma_organizacao, 7, 106)
dt_competencia <- substr(forma_organizacao, 107, 112)
forma_organizacao.ds <- data.frame(co_grupo, co_sub_grupo, co_forma_organizacao,
no_forma_organizacao, dt_competencia)
library(rmarkdown)
setwd('TabelaUnificada_201809_v1809051203/')
procedimento.layout <- read.csv('tb_procedimento_layout.txt', header = TRUE, sep = ',')
paged_table(procedimento.layout)
View(procedimento.layout)
co_grupo <- substr(procedimento, 1, 2)
co_sub_grupo <- substr(procedimento, 3, 4)
co_forma_organizacao <- substr(procedimento, 5, 6)
co_procedimento <- substr(procedimento, 1, 10)
qt_maxima_execucao <- substr(procedimento, 263, 266)
qt_dias_permanencia <- substr(procedimento, 267, 270)
qt_pontos <- substr(procedimento, 271, 274)
vl_idade_minima <- substr(procedimento, 275, 278)
vl_idade_maxima <- substr(procedimento, 279, 282)
vl_servico_hospitalar <- substr(procedimento, 283, 292)
vl_servico_ambulatorial <- substr(procedimento, 293, 302)
vl_servico_profissional <- substr(procedimento, 303, 312)
qt_tempo_permanencia <- substr(procedimento, 321, 324)
dt_competencia <- substr(procedimento, 325, 330)
procedimento.ds <- data.frame(co_grupo,
co_sub_grupo,
co_forma_organizacao,
co_procedimento,
qt_maxima_execucao,
qt_dias_permanencia,
qt_pontos,
vl_idade_minima,
vl_idade_maxima,
vl_servico_hospitalar,
vl_servico_ambulatorial,
vl_servico_profissional,
qt_tempo_permanencia,
dt_competencia)
View(procedimento.ds)
View(procedimento.ds)
co_grupo <- substr(procedimento, 1, 2)
co_sub_grupo <- substr(procedimento, 3, 4)
co_forma_organizacao <- substr(procedimento, 5, 6)
co_procedimento <- substr(procedimento, 1, 10)
no_procedimento <- substr(procedimento, 11, 260)
qt_maxima_execucao <- substr(procedimento, 263, 266)
qt_dias_permanencia <- substr(procedimento, 267, 270)
qt_pontos <- substr(procedimento, 271, 274)
vl_idade_minima <- substr(procedimento, 275, 278)
vl_idade_maxima <- substr(procedimento, 279, 282)
vl_servico_hospitalar <- substr(procedimento, 283, 292)
vl_servico_ambulatorial <- substr(procedimento, 293, 302)
vl_servico_profissional <- substr(procedimento, 303, 312)
qt_tempo_permanencia <- substr(procedimento, 321, 324)
dt_competencia <- substr(procedimento, 325, 330)
procedimento.ds <- data.frame(co_grupo,
co_sub_grupo,
co_forma_organizacao,
co_procedimento,
no_procedimento,
qt_maxima_execucao,
qt_dias_permanencia,
qt_pontos,
vl_idade_minima,
vl_idade_maxima,
vl_servico_hospitalar,
vl_servico_ambulatorial,
vl_servico_profissional,
qt_tempo_permanencia,
dt_competencia)
View(procedimento.ds)
res_temp <- merge(grupo, subgrupo)
View(res_temp)
res_temp <- merge(grupo.ds, subgrupo.ds)
View(res_temp)
res_temp <- merge(res_temp, forma_organizacao)
res_temp <- merge(res_temp, forma_organizacao.ds)
res_temp <- merge(grupo.ds, subgrupo.ds)
res_temp <- merge(res_temp, forma_organizacao.ds)
res_temp <- merge(res_temp, forma_organizacao.ds)
res_temp <- merge(grupo.ds, subgrupo.ds)
str(res_temp)
res_temp <- res_temp %>%
select(co_grupo, no_grupo, co_sub_grupo, no_sub_grupo)
View(res_temp)
res_temp <- merge(res_temp, forma_organizacao.ds, by = c('co_grupo', 'co_sub_grupo'))
str(res_temp)
res_temp <- res_temp %>%
select(co_grupo, no_grupo, co_sub_grupo, no_sub_grupo, co_forma_organizacao, no_forma_organizacao)
result <- merge(res_temp, procedimento.ds, by = c('co_grupo', 'co_sub_grupo', 'co_forma_organizacao'))
View(result)
str(procedimento.ds)
names(procedimento.ds)
res_temp <- res_temp %>%
select(co_grupo, no_grupo, co_sub_grupo, no_sub_grupo, co_forma_organizacao, no_forma_organizacao, co_procedimento, no_procedimento,
qt_maxima_execucao, qt_dias_permanencia, qt_pontos, vl_idade_minima, vl_idade_maxima, vl_servico_hospitalar, vl_servico_ambulatorial,
vl_servico_profissional, qt_tempo_permanencia, dt_competencia)
result <- result %>%
select(co_grupo, no_grupo, co_sub_grupo, no_sub_grupo, co_forma_organizacao, no_forma_organizacao, co_procedimento, no_procedimento,
qt_maxima_execucao, qt_dias_permanencia, qt_pontos, vl_idade_minima, vl_idade_maxima, vl_servico_hospitalar, vl_servico_ambulatorial,
vl_servico_profissional, qt_tempo_permanencia, dt_competencia)
write.csv2(result, 'tabela-sigtap-201809.csv', row.names = FALSE)
res_temp <- merge(grupo.ds, subgrupo.ds)
res_temp <- res_temp %>%
select(co_grupo, no_grupo, co_sub_grupo, no_sub_grupo)
library(rmarkdown)
paged_table(result)
library(rmarkdown)
paged_table(result)
library(rmarkdown)
paged_table(result)
knitr::opts_chunk$set(echo = FALSE)
setwd('TabelaUnificada_201809_v1809051203/')
rl_proc_mat <- iconv(read_document('tb_grupo.txt'), "latin1", "UTF-8")
setwd('TabelaUnificada_201809_v1809051203/')
rl_proc_mat <- iconv(read_document('rl_procedimento_compativel_layout.txt'), "latin1", "UTF-8")
library(dplyr)
library(textreadr)
setwd('TabelaUnificada_201809_v1809051203/')
rl_proc_mat <- iconv(read_document('rl_procedimento_compativel_layout.txt'), "latin1", "UTF-8")
setwd('TabelaUnificada_201809_v1809051203/')
rl_proc_mat <- iconv(read_document('rl_procedimento_compativel.txt'), "latin1", "UTF-8")
co_procedimento <- substr(rl_proc_mat, 1, 10)
co_registro_principal <- substr(rl_proc_mat, 11, 12)
co_procedimento_compativel <- substr(rl_proc_mat, 13, 22)
co_registro_compativel <- substr(rl_proc_mat, 23, 24)
tp_compatibilidade <- substr(rl_proc_mat, 25, 25)
qt_permitida <- substr(rl_proc_mat, 26, 29)
dt_competencia <- substr(rl_proc_mat, 30, 35)
materiais <- data.frame(co_procedimento,
co_registro_principal,
co_procedimento_compativel,
co_registro_compativel,
tp_compatibilidade,
qt_permitida,
dt_competencia)
require(rmarkdown)
paged_table(materiais)
co_procedimento <- substr(rl_proc_comp, 1, 10)
setwd('TabelaUnificada_201809_v1809051203/')
rl_proc_comp <- iconv(read_document('rl_procedimento_compativel.txt'), "latin1", "UTF-8")
co_procedimento <- substr(rl_proc_comp, 1, 10)
co_registro_principal <- substr(rl_proc_comp, 11, 12)
co_procedimento_compativel <- substr(rl_proc_comp, 13, 22)
co_registro_compativel <- substr(rl_proc_comp, 23, 24)
tp_compatibilidade <- substr(rl_proc_comp, 25, 25)
qt_permitida <- substr(rl_proc_comp, 26, 29)
dt_competencia <- substr(rl_proc_comp, 30, 35)
compativeis <- data.frame(co_procedimento,
co_registro_principal,
co_procedimento_compativel,
co_registro_compativel,
tp_compatibilidade,
qt_permitida,
dt_competencia)
require(rmarkdown)
paged_table(compativeis)
library(rmarkdown)
paged_table(compativeis)
library(rmarkdown)
paged_table(compativeis)
library(rmarkdown)
paged_table(compativeis)
View(compativeis)
knitr::opts_chunk$set(echo = FALSE)
write.csv2(compativeis, 'sigtap-compativeis.csv', row.names = FALSE)
knitr::opts_chunk$set(echo = FALSE)
library(dplyr)
library(textreadr)
setwd('TabelaUnificada_201904_v1904100923/')
grupo <- iconv(read_document('tb_grupo.txt'), "latin1", "UTF-8")
subgrupo <- iconv(read_document('tb_sub_grupo.txt'), "latin1", "UTF-8")
forma_organizacao <- iconv(read_document('tb_forma_organizacao.txt'), "latin1", "UTF-8")
procedimento <- iconv(read_document('tb_procedimento.txt'), "latin1", "UTF-8")
library(rmarkdown)
setwd('TabelaUnificada_201904_v1904100923/')
grupo.layout <- read.csv('tb_grupo_layout.txt', header = TRUE, sep = ',')
paged_table(grupo.layout)
co_grupo <- substr(grupo, 1, 2)
no_grupo <- substr(grupo, 3, 102)
dt_competencia <- substr(grupo, 103, 108)
grupo.ds <- data.frame(co_grupo, no_grupo, dt_competencia)
path <- 'TabelaUnificada_201904_v1904100923/'
library(rmarkdown)
setwd(path)
subgrupo.layout <- read.csv('tb_sub_grupo_layout.txt', header = TRUE, sep = ',')
paged_table(subgrupo.layout)
co_grupo <- substr(subgrupo, 1, 2)
co_sub_grupo <- substr(subgrupo, 3, 4)
no_sub_grupo <- substr(subgrupo, 5, 104)
dt_competencia <- substr(subgrupo, 105, 110)
subgrupo.ds <- data.frame(co_grupo, co_sub_grupo, no_sub_grupo, dt_competencia)
library(rmarkdown)
setwd(path)
forma_organizacao.layout <- read.csv('tb_forma_organizacao_layout.txt', header = TRUE, sep = ',')
paged_table(forma_organizacao.layout)
co_grupo <- substr(forma_organizacao, 1, 2)
co_sub_grupo <- substr(forma_organizacao, 3, 4)
co_forma_organizacao <- substr(forma_organizacao, 5, 6)
no_forma_organizacao <- substr(forma_organizacao, 7, 106)
dt_competencia <- substr(forma_organizacao, 107, 112)
forma_organizacao.ds <- data.frame(co_grupo, co_sub_grupo, co_forma_organizacao,
no_forma_organizacao, dt_competencia)
library(rmarkdown)
setwd(path)
procedimento.layout <- read.csv('tb_procedimento_layout.txt', header = TRUE, sep = ',')
paged_table(procedimento.layout)
co_grupo <- substr(procedimento, 1, 2)
co_sub_grupo <- substr(procedimento, 3, 4)
co_forma_organizacao <- substr(procedimento, 5, 6)
co_procedimento <- substr(procedimento, 1, 10)
no_procedimento <- substr(procedimento, 11, 260)
qt_maxima_execucao <- substr(procedimento, 263, 266)
qt_dias_permanencia <- substr(procedimento, 267, 270)
qt_pontos <- substr(procedimento, 271, 274)
vl_idade_minima <- substr(procedimento, 275, 278)
vl_idade_maxima <- substr(procedimento, 279, 282)
vl_servico_hospitalar <- substr(procedimento, 283, 292)
vl_servico_ambulatorial <- substr(procedimento, 293, 302)
vl_servico_profissional <- substr(procedimento, 303, 312)
qt_tempo_permanencia <- substr(procedimento, 321, 324)
dt_competencia <- substr(procedimento, 325, 330)
procedimento.ds <- data.frame(co_grupo,
co_sub_grupo,
co_forma_organizacao,
co_procedimento,
no_procedimento,
qt_maxima_execucao,
qt_dias_permanencia,
qt_pontos,
vl_idade_minima,
vl_idade_maxima,
vl_servico_hospitalar,
vl_servico_ambulatorial,
vl_servico_profissional,
qt_tempo_permanencia,
dt_competencia)
res_temp <- merge(grupo.ds, subgrupo.ds)
res_temp <- res_temp %>%
select(co_grupo, no_grupo, co_sub_grupo, no_sub_grupo)
res_temp <- merge(res_temp, forma_organizacao.ds, by = c('co_grupo', 'co_sub_grupo'))
res_temp <- res_temp %>%
select(co_grupo, no_grupo, co_sub_grupo, no_sub_grupo, co_forma_organizacao, no_forma_organizacao)
result <- merge(res_temp, procedimento.ds, by = c('co_grupo', 'co_sub_grupo', 'co_forma_organizacao'))
result <- result %>%
select(co_grupo, no_grupo, co_sub_grupo, no_sub_grupo, co_forma_organizacao, no_forma_organizacao, co_procedimento, no_procedimento,
qt_maxima_execucao, qt_dias_permanencia, qt_pontos, vl_idade_minima, vl_idade_maxima, vl_servico_hospitalar, vl_servico_ambulatorial,
vl_servico_profissional, qt_tempo_permanencia, dt_competencia)
write.csv2(result, 'tabela-sigtap-201904.csv', row.names = FALSE)
setwd(path)
rl_proc_comp <- iconv(read_document('rl_procedimento_compativel.txt'), "latin1", "UTF-8")
co_procedimento <- substr(rl_proc_comp, 1, 10)
co_registro_principal <- substr(rl_proc_comp, 11, 12)
co_procedimento_compativel <- substr(rl_proc_comp, 13, 22)
co_registro_compativel <- substr(rl_proc_comp, 23, 24)
tp_compatibilidade <- substr(rl_proc_comp, 25, 25)
qt_permitida <- substr(rl_proc_comp, 26, 29)
dt_competencia <- substr(rl_proc_comp, 30, 35)
compativeis <- data.frame(co_procedimento,
co_registro_principal,
co_procedimento_compativel,
co_registro_compativel,
tp_compatibilidade,
qt_permitida,
dt_competencia)
library(rmarkdown)
paged_table(compativeis)
write.csv2(compativeis, 'sigtap-compativeis-201904.csv', row.names = FALSE)
